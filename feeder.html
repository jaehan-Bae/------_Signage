<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 테스트 데이터 -->
  <script src="./js/dummy-data.js"></script>
  <!-- 색상 결정 규칙 -->
  <script src="./js/color-rules.js"></script>
  <!-- 차트 그리는 함수 (원형/막대) -->
  <script src="./js/chart.js"></script>
  <!-- 실제 DOM 렌더링 -->
  <script src="./js/main.js"></script>
  <!-- 피더 플레이트 -->
  <script src="./js/feeder-plate.js"></script>
  <!-- 커스텀 css / js-->
  <link rel="stylesheet" href="style.css">
  <title>피더파이프 제조 현황</title>
</head>
<body>
  <!-- header 외부에서 가져오기 -->
  <div class="container">
    <div id="header"></div>
    <script src="./js/custom.js"></script>
    <script>
      fetch("./header.html")
        .then(res => res.text())
        .then(data => {
          document.getElementById("header").innerHTML = data;
        });
    </script>
  
    <!-- section: 피더 -->
    <div id="#content-wrap">
      <section class="feeder-sec">
        <article class="feeder-img">
        <!-- <div class="feeder-tools">
          <button type="button" id="demoBtn">Demo: random statuses</button>
          <button type="button" id="resetBtn">Reset</button>
        </div> -->
        <div id="feederMount" class="feeder-mount"></div>
        </article>
    
        <div class="vvline"></div>
    
        <article class="feeder-info">
          <!-- 피더 요약 카드 -->
        <div class="feeder-info1 feeder-card bc" data-feeder-id="pickering-upper">
          <div class="feeder-left">
            <div class="feeder-title-row">
              <span class="feeder-title-main"></span>
              <span class="feeder-stitle"></span>
            </div>

            <div class="feeder-body-row">
              <div class="feeder-donut-con">
                <div class="feeder-ring">
                  <canvas class="feeder-canvas" width="130" height="130"></canvas>
                  <span class="feeder-percent" data-field="percent"></span>
                </div>

                <div class="feeder-kpi">
                  <div class="kpi-row">
                    <span class="kpi-label">목표</span>
                    <b class="kpi-value" data-field="total"></b>
                  </div>
                  <div class="kpi-row">
                    <span class="kpi-label">달성</span>
                    <b class="kpi-value" data-field="produced"></b>
                  </div>
                </div>
              </div>

              <div class="feeder-divider"></div>

              <div class="feeder-mini-bars">
                <div class="mini-row">
                  <span class="mini-label">UPPER</span>
                  <div class="mini-track">
                    <div class="mini-fill mini-fill-upper" data-role="mini-upper"></div>
                  </div>
                  <span class="mini-pct" data-role="mini-upper-pct">0%</span>
                </div>

                <div class="mini-row">
                  <span class="mini-label">MIDDLE</span>
                  <div class="mini-track">
                    <div class="mini-fill mini-fill-middle" data-role="mini-middle"></div>
                  </div>
                  <span class="mini-pct" data-role="mini-middle-pct">0%</span>
                </div>

                <div class="mini-row">
                  <span class="mini-label">LOWER</span>
                  <div class="mini-track">
                    <div class="mini-fill mini-fill-lower" data-role="mini-lower"></div>
                  </div>
                  <span class="mini-pct" data-role="mini-lower-pct">0%</span>
                </div>
              </div>
            </div>
          </div>
        </div>
    
          <!-- 공정별 진행현황 카드 -->
          <div class="feeder-info2 feeder-card bc" data-proc-id="weekly">
            <div class="proc-header-row">
              <div class="feeder-title-row">
                <div class="feeder-title-main">공정별 진행현황 
                  <span class="feeder-stitle">(Weekly 기준)</span>
                </div>
              </div>
    
            </div>
            
            <!-- 막대 그래프 영역 -->
            <div class="proc-bar-chart" id="procBarChart"></div>
            <!-- 우측 범례 -->
            <div class="proc-legend">
            <span class="proc-legend-item">
              <span class="proc-legend-dot proc-legend-dot--plan"></span>
              <span class="proc-legend-label">계획</span>
            </span>
            <span class="proc-legend-item">
              <span class="proc-legend-dot proc-legend-dot--actual"></span>
              <span class="proc-legend-label">실적</span>
            </span>
            <span class="proc-legend-item">
              <span class="proc-legend-dot proc-legend-dot--daily"></span>
              <span class="proc-legend-label">일간</span>
            </span>
            </div>
          </div>
    
          <!-- 공정 지연 현황 카드 -->
          <div class="feeder-info3 feeder-card bc" data-delay-role="delay-card">
            <div class="proc-header-row">
              <span class="feeder-title-main"><img src="./images/warning.png" alt="경고아이콘"> 공정 지연 현황</span>
            </div>
            <div class="delay-con">
              <!-- data-code 연결하면 됨 -->
              <div class="delay-left">
                <div class="delay-item" data-code="A09W" data-proc="PBC" data-status="delayed">
                  <span class="delay-label">A09W / PBC</span>
                  <span class="status-delayed">delayed</span>
                </div>
                <div class="delay-item" data-code="C13F" data-proc="ADAPTOR" data-status="delayed">
                  <span class="delay-label">C13F / Adaptor</span>
                  <span class="status-delayed">delayed</span>
                </div>
              </div>
              <div class="vline"></div>
              <div class="delay-right">
                <div class="delay-item" data-code="E02P" data-proc="P+PBO" data-status="delayed">
                  <span class="delay-label">E02P / P+PBO</span>
                  <span class="status-delayed">delayed</span>
                </div>
                <div class="delay-item" data-code="R19F" data-proc="FIN" data-status="delayed">
                  <span class="delay-label">R19F / FIN</span>
                  <span class="status-delayed">delayed</span>
                </div>
  
              </div>
            </div>
          </div>
    
        </article>
      </section>
    </div>
  </div>


</body>
</html>